<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live2D 简化测试页面</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }
        h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .description {
            font-size: 1.2em;
            margin-bottom: 40px;
            line-height: 1.6;
            opacity: 0.9;
        }
        .status {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }
        .status h4 {
            margin-top: 0;
            color: #4CAF50;
        }
        .instructions {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: left;
        }
        .instructions h4 {
            color: #ffd700;
            margin-top: 0;
        }
        .instructions ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .instructions li {
            margin: 8px 0;
        }
        .path-info {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎭 Live2D 简化测试页面</h1>
        <div class="description">
            这是一个简化版本的Live2D看板娘系统测试页面，用于验证基本功能是否正常。
        </div>
        
        <div class="status">
            <h4>📊 测试状态</h4>
            <p>✅ 页面已加载</p>
            <p>⏳ 等待Live2D系统初始化...</p>
        </div>
        
        <div class="path-info">
            <h4>🔍 路径信息</h4>
            <p><strong>当前域名:</strong> <span id="current-hostname"></span></p>
            <p><strong>检测到的基础路径:</strong> <span id="detected-path"></span></p>
            <p><strong>Live2D路径:</strong> <span id="live2d-path"></span></p>
        </div>
        
        <div class="instructions">
            <h4>🎯 测试说明</h4>
            <ul>
                <li><strong>检查控制台：</strong>打开浏览器开发者工具，查看控制台输出</li>
                <li><strong>查看看板娘：</strong>页面右下角应该出现切换按钮</li>
                <li><strong>点击切换：</strong>点击按钮应该显示/隐藏看板娘</li>
                <li><strong>检查样式：</strong>看板娘应该有基本的样式显示</li>
            </ul>
        </div>
        
        <div class="status">
            <h4>🔧 当前配置</h4>
            <p>• 自动路径检测（兼容本地和GitHub Pages）</p>
            <p>• 简化版初始化逻辑</p>
            <p>• 基础容器创建</p>
            <p>• 错误处理和日志输出</p>
        </div>
        
        <div class="path-info">
            <h4>🖼️ 图片路径测试</h4>
            <p><strong>头像图片:</strong> <span id="avatar-path"></span></p>
            <p><strong>背景图片:</strong> <span id="background-path"></span></p>
            <p><strong>图片状态:</strong> <span id="image-status"></span></p>
        </div>
    </div>
    
    <!-- 路径修复器 -->
    <script src="/TachibanaMarika-Blog/assets/js/path-fixer.js"></script>
    
    <!-- Live2D 看板娘系统 -->
    <script>
        // 动态路径检测
        function getBasePath() {
            if (window.location.hostname === 'zzz-sudo.github.io') {
                return '/TachibanaMarika-Blog';
            }
            return '';
        }
        
        // 显示路径信息
        document.getElementById('current-hostname').textContent = window.location.hostname;
        document.getElementById('detected-path').textContent = getBasePath() || '(本地开发)';
        document.getElementById('live2d-path').textContent = getBasePath() + '/assets/js/live2d/autoload.js';
        
        // 动态加载Live2D脚本
        const script = document.createElement('script');
        script.src = getBasePath() + '/assets/js/live2d/autoload.js';
        script.onerror = function() {
            console.error('❌ 无法加载Live2D脚本:', script.src);
            document.querySelector('.status h4').textContent = '❌ 加载失败';
            document.querySelector('.status p:nth-child(2)').textContent = '❌ Live2D脚本加载失败';
        };
        document.head.appendChild(script);
        
        // 测试图片路径
        function testImagePaths() {
            const basePath = getBasePath();
            const avatarPath = basePath + '/assets/images/touxiang.jpg';
            const backgroundPath = basePath + '/assets/images/background.jpg';
            
            document.getElementById('avatar-path').textContent = avatarPath;
            document.getElementById('background-path').textContent = backgroundPath;
            
            // 测试头像图片
            const avatarImg = new Image();
            avatarImg.onload = function() {
                console.log('✅ 头像图片加载成功:', avatarPath);
                document.getElementById('image-status').innerHTML = '✅ 头像和背景图片路径正常';
            };
            avatarImg.onerror = function() {
                console.error('❌ 头像图片加载失败:', avatarPath);
                document.getElementById('image-status').innerHTML = '❌ 头像图片路径错误';
            };
            avatarImg.src = avatarPath;
            
            // 测试背景图片
            const bgImg = new Image();
            bgImg.onload = function() {
                console.log('✅ 背景图片加载成功:', backgroundPath);
            };
            bgImg.onerror = function() {
                console.error('❌ 背景图片加载失败:', backgroundPath);
                document.getElementById('image-status').innerHTML = '❌ 背景图片路径错误';
            };
            bgImg.src = backgroundPath;
        }
        
        // 页面加载完成后测试图片
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', testImagePaths);
        } else {
            testImagePaths();
        }
    </script>
</body>
</html> 